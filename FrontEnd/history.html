<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 
    - primary meta tags
  -->
  <title>BMU Medical Portal - home</title>
  <meta name="title" content="Doclab - home">
  <meta name="description" content="This is a madical html template made by codewithsadee">

  <!-- 
    - favicon
  -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Rubik:wght@400;500;700&display=swap"
    rel="stylesheet">

  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="./assets/css/style.css">

  <!-- 
    - preload images
  -->
  <link rel="preload" as="image" href="./assets/images/hero-banner.png">
  <link rel="preload" as="image" href="./assets/images/hero-bg.png">

</head>

<body id="top">

  <!-- 
    - #PRELOADER
  -->

  <div class="preloader" data-preloader>
    <div class="circle"></div>
  </div>





  <!-- 
    - #HEADER
  -->

  <header class="header" data-header>
    <div class="container">

      <a href="#" class="logo">
        <img src="./assets/images/logo.svg" width="136" height="46" alt="Doclab home">
      </a>

      <nav class="navbar" data-navbar>

        <div class="navbar-top">

          <a href="#" class="logo">
            <img src="./assets/images/logo.svg" width="136" height="46" alt="Doclab home">
          </a>

          <button class="nav-close-btn" aria-label="clsoe menu" data-nav-toggler>
            <ion-icon name="close-outline" aria-hidden="true"></ion-icon>
          </button>

        </div>

        <ul class="navbar-list">

          <li class="navbar-item">
            <a href="#" class="navbar-link title-md">Home</a>
          </li>

          <li class="navbar-item">
            <a href="#" class="navbar-link title-md">Analytics</a>
          </li>

          <li class="navbar-item">
            <a href="#" class="navbar-link title-md">History</a>
          </li>

        

          <li class="navbar-item">
            <a href="#" class="navbar-link title-md">About Us</a>
          </li>

        </ul>

        <ul class="social-list">

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-twitter"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-facebook"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-pinterest"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-instagram"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-youtube"></ion-icon>
            </a>
          </li>

        </ul>

      </nav>

      
  </header>





  <main>
    <article>

      <!-- 
        - #HERO
      -->
      
      

      <style>
        .student-section {
          display: flex;
          margin: 20px;
          background-color: #14535a;
          border-radius: 10px;
          box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          padding: 70px;
        }
      
        .student-info {
          flex: 2;
          padding: 20px;
          border-right: 1px solid #ccc;
          box-shadow: none;
          background-color: white;
          border-radius: 10px
          
        }
        .health-details {
  background-color: #f8f8f8;
  border-radius: 10px;
  box-shadow: 0px 0px 10px rgba(0,0,0,0.3);
  padding: 20px;
  width: 800px;
  margin-left: 170px;
}

.health-item {
  margin-bottom: 10px;
}

.label {
  font-weight: bold;
}

input[type="text"] {
  border: none;
  background-color: #f2f2f2;
  padding: 5px;
  border-radius: 5px;
  width: 100%;
}
      
        
      
        h2 {
          margin-top: 0;
          margin-bottom: 10px;
          font-size: 24px;
          font-weight: 600;
          color: #333;
        }
      
        p {
          margin: 0;
          margin-bottom: 10px;
          font-size: 16px;
          color: #555;
        }
      
        .label {
          font-weight: 600;
          color: #333;
        }
      
        .value {
          color: #555;
        }
      
        .highlight {
          font-weight: 600;
          color: #f66;
        }
      </style>
      
      <div class="student-section">
        <div class="student-info">
          <h2>Student Information</h2>
          <div class="info-item">
            <span class="label">Name:</span>
            <span class="value" id="name">John Doe</span>
          </div>
          <div class="info-item">
            <span class="label">Enrollment Number:</span>
            <span class="value" id="enrollment">12345</span>
          </div>
          <div class="info-item">
            <span class="label">Hostel:</span>
            <span class="value" id="hostel">ABC</span>
          </div>
          <div class="info-item">
            <span class="label">Phone Number:</span>
            <span class="value" id="phone">555-1234</span>
          </div>
          <div class="info-item">
            <span class="label">Batch:</span>
            <span class="value" id="batch">2022</span>
          </div>
          <div class="info-item">
            <span class="label">Course:</span>
            <span class="value" id="course">Computer Science</span>
          </div>
        </div>
        <div class="health-details">
          <h2>Enter Health Details</h2>
          <div class="health-item">
            <span class="label">Symptoms:</span>
            <input type="text" id="symptoms" name="symptoms" value="">
          </div>
          <div class="health-item">
            <span class="label">Disease:</span>
            <input type="text" id="disease" name="disease" value="">
          </div>
          <div class="health-item">
            <span class="label">Treatment:</span>
            <div id="medicine-given" style="display: flex; flex-direction: column;">
            <!-- create a div to accomodate two input tags side by side -->
            <div style="display: flex; justify-content: space-between; width: 50%; margin-bottom: 10px;"> 
              <input type="text" placeholder="Medicine Name" id="medicine" name="treatment" value="" style="width: 50%; margin-right: 10%;">
              <input type="text" placeholder="Quantity" id="quantity" name="treatment" value="" style="width: 50%;  margin-right: 10%;">
            </div>
            </div>  
            <!-- create a button to add more inputs -->
            <button type="button" id="add-medicine" class="btn btn-primary">Add Medicine</button>

            <script>
              // create a function to add more inputs to the div with id medicine-given. Make it happen through a button click event.
              document.getElementById("add-medicine").addEventListener("click", function() {
            //     <div style="display: flex; justify-content: space-between; width: 50%; margin-bottom: 10px;"> 
            //   <input type="text" placeholder="Medicine Name" id="medicine" name="treatment" value="" style="width: 50%; margin-right: 10%;">
            //   <input type="text" placeholder="Quantity" id="quantity" name="treatment" value="" style="width: 50%;  margin-right: 10%;">
            // </div>
            // create a div like above and append it to the div with id medicine-given
            const medicineGiven = document.getElementById('medicine-given');
            const div = document.createElement('div');
            div.style.display = 'flex';
            div.style.justifyContent = 'space-between';
            div.style.width = '50%';
            div.style.marginBottom = '10px';
            // create two input tags
            const input1 = document.createElement('input');
            input1.type = 'text';
            input1.placeholder = 'Medicine Name';
            input1.id = 'medicine';
            input1.name = 'treatment';
            input1.value = '';
            input1.style.width = '50%';
            input1.style.marginRight = '10%';
            const input2 = document.createElement('input');
            input2.type = 'text';
            input2.placeholder = 'Quantity';
            input2.id = 'quantity';
            input2.name = 'treatment';
            input2.value = '';
            input2.style.width = '50%';
            input2.style.marginRight = '10%';
            // append the inputs to the div
            div.appendChild(input1);
            div.appendChild(input2);
            // append the div to the medicineGiven div
            medicineGiven.appendChild(div);
              });

            </script>
          </div>
          <div class="health-item">
            <span class="label">Referred:</span>
            <input type="text" id="referred" name="referred" placeholder="yes/no">
          </div>
          <div class="health-item">
            <span class="label">Critical:</span>
            <input type="text" id="critical" name="critical" placeholder="Low/Medium/High">
          </div>
          <!-- create a button to submit data on the right side-->
          <button type="submit" name="submit" id="submitMedicalData" class="btn btn-primary">Submit</button>

        </div>
      </div>
    
      <head>
        <meta charset="UTF-8">
        <title>Medical History Record</title>
        <style>
          table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 20px;
            margin-left: 30px;
            margin-right: 30px;
          }
          th, td {
            padding: 8px;
            text-align: left;
            border: 1px solid #ddd;
          }
          th {
            background-color: #f2f2f2;
            font-weight: bold;
          }
          h1 {
        text-align: center;
      }
        </style>
      </head>
      <body>
        <h1>Medical History Record</h1>
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Medicine Given</th>
              <th>Symptoms</th>
              <th>Disease</th>
              <th>Critical</th>
              <th>Referred</th>
            </tr>
          </thead>
          <tbody id="tablebody">
           
          </tbody>
        </table>
      </body>

    </article>
  </main>


  <!-- 
    - #FOOTER
  -->

  <footer class="footer" style="background-image: url('./assets/images/footer-bg.png')">
    <div class="container">

      <div class="section footer-top">

        <div class="footer-brand" data-reveal="bottom">

          <a href="#" class="logo">
            <img src="./assets/images/logo.svg" width="136" height="46" loading="lazy" alt="Doclab home">
          </a>

          <ul class="contact-list has-after">

            <li class="contact-item">

              <div class="item-icon">
                <ion-icon name="mail-open-outline"></ion-icon>
              </div>

              <div>
                <p>
                  Main Email : <a href="mailto:contact@website.com" class="contact-link">contact@&shy;website.com</a>
                </p>

                <p>
                  Inquiries : <a href="mailto:Info@mail.com" class="contact-link">Info@mail.com</a>
                </p>
              </div>

            </li>

            <li class="contact-item">

              <div class="item-icon">
                <ion-icon name="call-outline"></ion-icon>
              </div>

              <div>
                <p>
                  Office Telephone : <a href="tel:0029129102320" class="contact-link">0029129102320</a>
                </p>

                <p>
                  Mobile : <a href="tel:000232439493" class="contact-link">000 2324 39493</a>
                </p>
              </div>

            </li>

          </ul>

        </div>

        <div class="footer-list" data-reveal="bottom">

          <p class="headline-sm footer-list-title">About Us</p>

          <p class="text">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
          </p>

          <address class="address">
            <ion-icon name="map-outline"></ion-icon>

            <span class="text">
              2416 Mapleview Drive <br>
              Tampa, FL 33634
            </span>
          </address>

        </div>

        <ul class="footer-list" data-reveal="bottom">

          <li>
            <p class="headline-sm footer-list-title">History</p>
          </li>

          <li>
            <a href="#" class="text footer-link">Conditions</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Listing</a>
          </li>

          <li>
            <a href="#" class="text footer-link">How It Works</a>
          </li>

          <li>
            <a href="#" class="text footer-link">What We Offer</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Latest News</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Contact Us</a>
          </li>

        </ul>

        <ul class="footer-list" data-reveal="bottom">

          <li>
            <p class="headline-sm footer-list-title">Useful Links</p>
          </li>

          <li>
            <a href="#" class="text footer-link">Conditions</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Terms of Use</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Our Services</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Join as a Doctor</a>
          </li>

          <li>
            <a href="#" class="text footer-link">New Guests List</a>
          </li>

          <li>
            <a href="#" class="text footer-link">The Team List</a>
          </li>

        </ul>

        <div class="footer-list" data-reveal="bottom">

          <p class="headline-sm footer-list-title">Subscribe</p>

          <form action="" class="footer-form">
            <input type="email" name="email" placeholder="Email" class="input-field title-lg">

            <button type="submit" class="btn has-before title-md">Subscribe</button>
          </form>

          <p class="text">
            Get the latest updates via email. Any time you may unsubscribe
          </p>

        </div>

      </div>

      <div class="footer-bottom">

        

        <ul class="social-list">

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-facebook"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-twitter"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-google"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-linkedin"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-pinterest"></ion-icon>
            </a>
          </li>

        </ul>

      </div>

    </div>
  </footer>


  <!-- 
    - #BACK TO TOP
  -->

  <a href="#top" class="back-top-btn" aria-label="back to top" data-back-top-btn>
    <ion-icon name="chevron-up"></ion-icon>
  </a>





  <!-- 
    - custom js link
  -->
  <script src="./assets/js/script.js"></script>

  <!-- 
    - ionicon link
  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  <script>
    // get the student data from local storage
    const studentData = JSON.parse(localStorage.getItem('student'));
    console.log(studentData);

    // create a function to update student data in the page
    function updateData(){
            // get elements from the page
            const name = document.getElementById('name');
            // const email = document.getElementById('email');
            const phone = document.getElementById('phone');
            const hostel = document.getElementById('hostel');
            const enrollment = document.getElementById('enrollment');
            const batch = document.getElementById('batch');
            const course = document.getElementById('course');
            // clear the previous data
            name.innerHTML = '';
            // email.innerHTML = '';
            phone.innerHTML = '';
            hostel.innerHTML = '';
            enrollment.innerHTML = '';
            batch.innerHTML = '';
            course.innerHTML = '';
            // update the data
            name.innerHTML = studentData.name;
            // email.innerHTML = studentData.email;
            phone.innerHTML = studentData.mobile;
            hostel.innerHTML = studentData.hostel;
            enrollment.innerHTML = studentData.enrollment;
            batch.innerHTML = studentData.batch;
            course.innerHTML = studentData.course;


    }
    updateData();

    // create a function to submit medical data using the post api "http://127.0.0.1:5000/postapi" and body format like {
    // "enroll": 200197,
    // "symptoms": "Fever, cold, headache",
    // "disease": "Viral",
    // "treatment": "Accolate",
    // "referred": "y",
    // "critical": "H"
    // }

    function submitData(){
      submitMedicalData.innerHTML = 'Submitting...';
      submitMedicalData.disabled = true;
      // get the data from the form
      const symptoms = document.getElementById('symptoms').value;
      const disease = document.getElementById('disease').value;
      const medicine = document.getElementById('medicine').value;
      const quantity = document.getElementById('quantity').value;
      const treatment = medicine + ' X ' + quantity + ";";
      const referred = document.getElementById('referred').value;
      const critical = document.getElementById('critical').value;
      // create a body object
      const body = {
        enroll: studentData.enrollment,
        symptoms: symptoms,
        disease: disease,
        treatment: treatment,
        referred: referred[0],
        critical: critical[0]
      }
      console.log(body);
      // send the data to the api
      fetch('http://127.0.0.1:5000/postapi', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(body)
      })
      .then(res => res.json())
      .then(data => {
        console.log(data);
        // show the success message
        const success = document.getElementById('success');
        success.style.display = 'block';
        // hide the success message after 3 seconds
        setTimeout(() => {
          success.style.display = 'none';
        }, 3000);
      })
      .catch(err => {
        console.log(err);
        // show the error message
        const error = document.getElementById('error');
        error.style.display = 'block';
        // hide the error message after 3 seconds
        setTimeout(() => {
          error.style.display = 'none';
        }, 3000);
      })
      // redirect to the index page
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 3000);
    }
    // add event listener to submitMedicalData button
    const submitMedicalData = document.getElementById('submitMedicalData');
    // change button name to submiting... and disable it
    submitMedicalData.addEventListener('click', submitData);
    


  </script>

  <script>
    // get the data from this api "http://127.0.0.1:5000//students/medrec/id/" and append the enrollment from the local storage
    // create a function to get the data from the api
    function getMedicalData(){
      const tableBody = document.getElementById('tablebody');
      // clear the previous data
      tableBody.innerHTML = '';
      // get the enrollment from the local storage
      var enrollment = JSON.parse(localStorage.getItem('student')).enrollment;
      // send the request to the api
      var api = "http://127.0.0.1:5000//students/medrec/id/"
      // convert enrollment to string and append to the api
      api = api + enrollment.toString();
      console.log(api);
      fetch(api)
      .then(res => res.json())
      .then(data => {
        //iterate through the data and log it
        data.forEach(element => {
          // create a row in this format
          //  <tr>
          //     <td>2023-04-01</td>
          //     <td>Paracetamol</td>
          //     <td>Fever, Headache</td>
          //     <td>Flu</td>
          //     <td>No</td>
          //     <td>No</td>
          //   </tr>
          // create a row
          const row = document.createElement('tr');
          // create a date cell
          const date = document.createElement('td');
          date.innerHTML = element.date;
          // create a medicine cell
          const medicine = document.createElement('td');
          medicine.innerHTML = element.treatment;
          // create a symptoms cell
          const symptoms = document.createElement('td');
          symptoms.innerHTML = element.symptoms;
          // create a disease cell
          const disease = document.createElement('td');
          disease.innerHTML = element.disease;
          // create a referred cell
          const referred = document.createElement('td');
          referred.innerHTML = element.referred;
          // create a critical cell
          const critical = document.createElement('td');
          critical.innerHTML = element.critical;
          // append all the cells to the row
          row.appendChild(date);
          row.appendChild(medicine);
          row.appendChild(symptoms);
          row.appendChild(disease);
          row.appendChild(referred);
          row.appendChild(critical);
          // append the row to the table body
          tableBody.appendChild(row);



        });
      })
      .catch(err => {
        console.log(err);
      })
    }
    getMedicalData();


  </script>

</body>

</html>